<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Lord Nine Boss Timers</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Roboto+Mono:wght@600&display=swap" rel="stylesheet">
<style>
body {
  background:#0b0c0f;
  margin:0;
  padding:0;
  font-family:'Cinzel',serif;
  color:#d4af37;
  display:flex;
  flex-direction:column;
  align-items:center;
}
header {
  text-align:center;
  margin:40px 0 20px;
}
header h1 {
  font-size:42px;
  color:#d4af37;
  text-transform:uppercase;
  letter-spacing:2px;
  margin:0;
  text-shadow:0 0 8px #d4af37;
  animation:glow 2s ease-in-out infinite alternate;
}
@keyframes glow {
  from { text-shadow:0 0 8px #d4af37; }
  to { text-shadow:0 0 20px #ffd700; }
}
header h2 {
  font-size:20px;
  color:#c9a34e;
  letter-spacing:3px;
  margin-top:5px;
  font-weight:normal;
}
.boss-container {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:20px;
  width:95%;
  max-width:1200px;
  padding:20px;
  box-sizing:border-box;
}
.boss {
  background:#111;
  border:1px solid #333;
  padding:20px;
  border-radius:10px;
  text-align:center;
  box-shadow:0 0 15px rgba(212,175,55,.3);
  transition:transform .3s;
}
.boss:hover {
  transform:scale(1.05);
  box-shadow:0 0 20px rgba(212,175,55,.6);
}
.boss h3 {
  margin:0 0 12px;
  font-size:22px;
  color:#f4e1b1;
}
.timer {
  font-family:'Roboto Mono',monospace;
  font-size:28px;
  font-weight:700;
  margin-bottom:10px;
  color:#fff;
}
.next {
  font-size:14px;
  color:#bbb;
  margin-bottom:12px;
}
.reminder {
  font-size:12px;
  color:#888;
  margin-bottom:10px;
}
.manual-entry {
  display:flex;
  justify-content:center;
  gap:8px;
  margin-bottom:10px;
  flex-wrap:wrap;
}
.manual-entry input[type="time"] {
  background:#222;
  border:1px solid #d4af37;
  color:#fff;
  padding:6px 8px;
  border-radius:6px;
  font-size:13px;
}
.controls {
  display:flex;
  justify-content:center;
  gap:8px;
  flex-wrap:wrap;
}
button {
  background:none;
  border:1px solid #d4af37;
  color:#d4af37;
  padding:8px 12px;
  border-radius:8px;
  font-size:13px;
  cursor:pointer;
  transition:.2s;
}
button:hover {
  background:#d4af37;
  color:#111;
}
.spawned {
  color:#00ff7f;
}
.alert {
  color:#ff4500;
}
</style>
</head>
<body>

<header>
  <h1>LORD NINE</h1>
  <h2>BOSS TIMERS</h2>
</header>

<div class="boss-container" id="bossContainer"></div>

<script>
// ---- Boss Data ----
const bosses = [
  { name:'Undomiel', respawn:24*60*60 },
  { name:'Lady Daliah', respawn:18*60*60 },
  { name:'Venatus', respawn:10*60*60 }, // FIXED to 10 hours
  { name:'Viorent', respawn:10*60*60 },
  { name:'Ego', respawn:21*60*60 },
  { name:'Thymele', special:true },
  { name:'Araneo', respawn:24*60*60 },
  { name:'Livera', respawn:24*60*60 },
  { name:'Clemantis', weekly:[{day:1,hour:11,minute:30},{day:4,hour:19,minute:0}] },
  { name:'Saphirus', weekly:[{day:0,hour:17,minute:0},{day:2,hour:11,minute:30}] },
  { name:'Neutro', weekly:[{day:2,hour:19,minute:0},{day:4,hour:11,minute:30}] },
  { name:'General Aquleus', respawn:29*60*60 },
  { name:'Amentis', respawn:29*60*60 },
  { name:'Baron Braudmore', respawn:32*60*60 },
  { name:'Milavy', weekly:[{day:6,hour:15,minute:0}] },
  { name:'Wannitas', respawn:48*60*60 },
  { name:'Metus', respawn:48*60*60 },
  { name:'Duplican', respawn:48*60*60 },
  { name:'Shuliar', respawn:35*60*60 },
  { name:'Ringor', weekly:[{day:6,hour:17,minute:0}] },
  { name:'Roderick', weekly:[{day:5,hour:19,minute:0}] },
  { name:'Gareth', respawn:32*60*60 },
  { name:'Titore', respawn:37*60*60 },
  { name:'Larba', respawn:35*60*60 },
  { name:'Catena', respawn:35*60*60 },
  { name:'Auraq', weekly:[{day:0,hour:21,minute:0},{day:3,hour:21,minute:0}] }
];

function nameToId(n){
  return ('b-' + n.toLowerCase().trim()
    .replace(/\s+/g,'-')
    .replace(/[^a-z0-9-]/g,'')); 
}

function getBossById(id){
  return bosses.find(b => nameToId(b.name) === id);
}

function getStoredTime(id){
  const t = localStorage.getItem('spawn_'+id);
  return t ? new Date(parseInt(t)) : null;
}

function storeTime(id, date){
  localStorage.setItem('spawn_'+id, date.getTime());
}

function formatTime(ms){
  if(ms<=0) return 'SPAWNED!';
  const s=Math.floor(ms/1000);
  const h=Math.floor(s/3600);
  const m=Math.floor((s%3600)/60);
  const sec=s%60;
  return `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
}

function nextWeeklySpawn(weekly){
  const now = new Date();
  let soonest = null;
  weekly.forEach(slot => {
    const d = new Date(now);
    const today = now.getDay();
    let diff = (slot.day - today + 7) % 7;
    if(diff===0 && (now.getHours()>slot.hour || (now.getHours()===slot.hour && now.getMinutes()>=slot.minute))) diff=7;
    d.setDate(d.getDate()+diff);
    d.setHours(slot.hour, slot.minute, 0, 0);
    if(!soonest || d<soonest) soonest = d;
  });
  return soonest;
}

function nextThymeleSpawn(fromDate){
  const base = new Date(fromDate);
  const day = base.getDay();
  const next = new Date(base);
  if(day === 1){
    next.setDate(base.getDate()+2);
    next.setHours(11,30,0,0);
  } else if(day === 3){
    next.setDate(base.getDate()+5);
    next.setHours(19,0,0,0);
  } else {
    const daysToMon = (1 + 7 - day) % 7 || 7;
    next.setDate(base.getDate()+daysToMon);
    next.setHours(19,0,0,0);
  }
  return next;
}

function createUI(){
  const container = document.getElementById('bossContainer');
  bosses.forEach(b => {
    const id = nameToId(b.name);
    let stored = getStoredTime(id);
    if(stored){
      b.nextSpawn = stored;
    } else if(b.weekly){
      b.nextSpawn = nextWeeklySpawn(b.weekly);
    } else if(b.special){
      b.nextSpawn = nextThymeleSpawn(new Date());
    } else {
      b.nextSpawn = new Date();
    }

    const div = document.createElement('div');
    div.className = 'boss';
    div.innerHTML = `
      <h3>${b.name}</h3>
      <div class="timer" id="timer-${id}"></div>
      <div class="next" id="next-${id}"></div>
      <div class="reminder">Set a kill time or use "Killed Now"</div>
      <div class="manual-entry">
        <input type="time" id="killTime-${id}" step="60" aria-label="Kill time for ${b.name}">
      </div>
      <div class="controls">
        <button onclick="killedNow('${id}')">Killed Now</button>
        <button onclick="manualEntry('${id}')">Set Manual Kill Time</button>
      </div>
    `;
    container.appendChild(div);
  });
}

function updateTimers(){
  const now = new Date();
  bosses.forEach(b => {
    let next = b.nextSpawn;
    let diff = next - now;

    if(diff <= 0 && b.weekly){
      b.nextSpawn = nextWeeklySpawn(b.weekly);
      next = b.nextSpawn;
      storeTime(nameToId(b.name), next);
      diff = next - now;
    } else if(diff <= 0 && !b.weekly && !b.special){
      b.nextSpawn = new Date(now.getTime() + b.respawn*1000);
      next = b.nextSpawn;
      storeTime(nameToId(b.name), next);
      diff = next - now;
    }

    const id = nameToId(b.name);
    const timerEl = document.getElementById(`timer-${id}`);
    const nextEl = document.getElementById(`next-${id}`);

    if(timerEl && nextEl){
      timerEl.textContent = formatTime(diff);
      timerEl.className = 'timer';
      if(diff<=0) timerEl.classList.add('spawned');
      else if(diff<=10*60*1000) timerEl.classList.add('alert');
      nextEl.textContent = `Next: ${next.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
    }
  });
}

function killedNow(id){
  const b = getBossById(id);
  const now = new Date();
  if(b.weekly){
    b.nextSpawn = nextWeeklySpawn(b.weekly);
  } else if(b.special){
    b.nextSpawn = nextThymeleSpawn(now);
  } else {
    b.nextSpawn = new Date(now.getTime() + b.respawn*1000);
  }
  storeTime(id, b.nextSpawn);
}

function manualEntry(id){
  const input = document.getElementById(`killTime-${id}`);
  if(!input || !input.value) return;
  const now = new Date();
  const [h,m] = input.value.split(':').map(Number);
  let killTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, m, 0, 0);
  if(killTime > now) killTime.setDate(killTime.getDate()-1);

  const b = getBossById(id);
  if(b.weekly){
    b.nextSpawn = nextWeeklySpawn(b.weekly);
  } else if(b.special){
    b.nextSpawn = nextThymeleSpawn(killTime);
  } else {
    b.nextSpawn = new Date(killTime.getTime() + b.respawn*1000);
  }
  storeTime(id, b.nextSpawn);
}

createUI();
updateTimers();
setInterval(updateTimers, 1000);
</script>

</body>
</html>
