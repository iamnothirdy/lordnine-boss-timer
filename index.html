<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lord Nine Boss Timer Overlay</title>
<style>
body { background: rgba(0,0,0,0); font-family: 'Trebuchet MS', sans-serif; color: #FFD700; margin:0; padding:0; text-align:center; }
h2 { margin:10px 0; font-size:28px; text-shadow:2px 2px 5px #000; }
.boss-container { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; padding:10px; }
.boss { background: rgba(0,0,0,0.6); padding:15px; border-radius:12px; width:200px; border:2px solid #FFD700; box-shadow:0 0 15px rgba(255,215,0,0.5); position:relative; }
.boss h3 { margin:0; font-size:20px; }
.timer { font-size:26px; margin:12px 0; font-weight:bold; }
.controls { display:flex; justify-content:space-between; gap:5px; }
button { background:#444; color:#FFD700; border:1px solid #FFD700; padding:6px; cursor:pointer; border-radius:5px; font-size:12px; }
button:hover { background:#666; }
.alert { color:#FF4444; animation: blink 1s infinite; }
.spawned { color:#00FF7F; animation: pulse 1.5s infinite; }
.next { font-size:12px; color:#aaa; }
@keyframes blink { 50% { opacity:0.5; } }
@keyframes pulse { 0%,100%{ transform:scale(1); } 50%{ transform:scale(1.1); } }
</style>
</head>
<body>
<h2>Lord Nine Boss Timers</h2>
<div class="boss-container" id="bossContainer"></div>
<div class="next" id="syncStatus">Syncing data...</div>

<script>
const bosses = [
  { name:'Undomiel', respawn:24*60*60, nextSpawn:'12:05 AM' },
  { name:'Lady Daliah', respawn:18*60*60, nextSpawn:'10:03 PM' }, // updated
  { name:'Venatus (AM)', respawn:10*60*60, nextSpawn:'8:04 AM' },
  { name:'Viorent (AM)', respawn:10*60*60, nextSpawn:'8:14 AM' },
  { name:'Ego', respawn:21*60*60, nextSpawn:'10:49 AM' },
  { name:'Thymele', special:true, nextSpawn:'11:30 AM' },
  { name:'Venatus (PM)', respawn:10*60*60, nextSpawn:'6:00 PM' },
  { name:'Viorent (PM)', respawn:10*60*60, nextSpawn:'6:00 PM' },
  { name:'Araneo', respawn:24*60*60, nextSpawn:'11:06 PM' },
  { name:'Livera', respawn:24*60*60, nextSpawn:'11:16 PM' }
];

function parseTime(str){
  const now = new Date();
  let [time, ampm] = str.split(' ');
  let [h,m] = time.split(':').map(Number);
  if(ampm && ampm.toLowerCase()==='pm' && h<12) h+=12;
  if(ampm && ampm.toLowerCase()==='am' && h===12) h=0;
  const dt = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, m, 0, 0);
  if(dt<now) dt.setDate(dt.getDate()+1);
  return dt;
}

function formatTime(ms){
  if(ms<=0) return 'SPAWNED!';
  const s=Math.floor(ms/1000);
  const h=Math.floor(s/3600);
  const m=Math.floor((s%3600)/60);
  const sec=s%60;
  return `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
}

function updateTimers(){
  const container = document.getElementById('bossContainer');
  container.innerHTML='';
  const now = new Date();
  bosses.forEach(b=>{
    let next;
    if(typeof b.nextSpawn==='string') next=parseTime(b.nextSpawn);
    else next=new Date(b.nextSpawn);
    const diff = next - now;
    const div = document.createElement('div'); div.className='boss';
    let statusClass='';
    if(diff<=0) statusClass='spawned';
    else if(diff<=10*60*1000) statusClass='alert';
    div.innerHTML=`
      <h3>${b.name}</h3>
      <div class="timer ${statusClass}">${diff>0?formatTime(diff):'SPAWNED!'}</div>
      <div class="next">Next: ${next.toLocaleString()}</div>
      <div class="controls">
        <button onclick="killedNow('${b.name}')">Killed Now</button>
      </div>
    `;
    container.appendChild(div);
  });
}

function killedNow(name){
  const now = new Date();
  bosses.forEach(b=>{
    if(b.name===name){
      if(b.special){ 
        const day = now.getDay();
        let next=new Date(now);
        if(day===1){ next.setDate(now.getDate()+2); next.setHours(11,30,0,0); }
        else if(day===3){ next.setDate(now.getDate()+5); next.setHours(19,0,0,0); }
        else{ next.setDate(now.getDate()+((1+7-day)%7)); next.setHours(19,0,0,0); }
        b.nextSpawn=next;
      } else b.nextSpawn=new Date(now.getTime()+b.respawn*1000);
    }
  });
}

setInterval(updateTimers,1000);
updateTimers();
</script>
</body>
</html>
