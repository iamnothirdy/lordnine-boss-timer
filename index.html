<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Lord Nine Boss Timers</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Roboto+Mono:wght@600&display=swap" rel="stylesheet">
<style>
body {
  background:#0b0c0f;
  margin:0;
  padding:0;
  font-family:'Cinzel',serif;
  color:#d4af37;
  display:flex;
  flex-direction:column;
  align-items:center;
}
header {
  text-align:center;
  margin:40px 0 20px;
}
header h1 {
  font-size:42px;
  color:#d4af37;
  text-transform:uppercase;
  letter-spacing:2px;
  margin:0;
  text-shadow:0 0 8px #d4af37;
  animation:glow 2s ease-in-out infinite alternate;
}
@keyframes glow {
  from { text-shadow:0 0 8px #d4af37; }
  to { text-shadow:0 0 20px #ffd700; }
}
header h2 {
  font-size:20px;
  color:#c9a34e;
  letter-spacing:3px;
  margin-top:5px;
  font-weight:normal;
}
#nextBoss {
  margin:20px auto;
  background:#111;
  padding:15px;
  border-radius:10px;
  font-size:18px;
  color:#fff;
  text-align:center;
  box-shadow:0 0 20px rgba(212,175,55,.6);
}
.boss-container {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:20px;
  width:95%;
  max-width:1200px;
  padding:20px;
  box-sizing:border-box;
}
.boss {
  background:#111;
  border:1px solid #333;
  padding:20px;
  border-radius:10px;
  text-align:center;
  box-shadow:0 0 15px rgba(212,175,55,.3);
  transition:transform .3s;
}
.boss:hover {
  transform:scale(1.05);
  box-shadow:0 0 20px rgba(212,175,55,.6);
}
.boss h3 {
  margin:0 0 12px;
  font-size:22px;
  color:#f4e1b1;
}
.timer {
  font-family:'Roboto Mono',monospace;
  font-size:28px;
  font-weight:700;
  margin-bottom:10px;
  color:#fff;
}
.timer.green { color:#00ff7f; }
.timer.yellow { color:#ffff00; }
.timer.red { color:#ff4500; }
.timer.spawned {
  color:#00ff7f;
  animation: flash 1s infinite alternate;
}
@keyframes flash {
  from { opacity:1; }
  to { opacity:0.3; }
}
.next {
  font-size:14px;
  color:#bbb;
  margin-bottom:12px;
}
.reminder {
  font-size:12px;
  color:#888;
  margin-bottom:10px;
}
.manual-entry {
  display:flex;
  justify-content:center;
  gap:8px;
  margin-bottom:10px;
  flex-wrap:wrap;
}
.manual-entry input[type="time"] {
  background:#222;
  border:1px solid #d4af37;
  color:#fff;
  padding:6px 8px;
  border-radius:6px;
  font-size:13px;
}
.controls {
  display:flex;
  justify-content:center;
  gap:8px;
  flex-wrap:wrap;
}
button {
  background:none;
  border:1px solid #d4af37;
  color:#d4af37;
  padding:8px 12px;
  border-radius:8px;
  font-size:13px;
  cursor:pointer;
  transition:.2s;
}
button:hover {
  background:#d4af37;
  color:#111;
}
</style>
</head>
<body>

<header>
  <h1>LORD NINE</h1>
  <h2>BOSS TIMERS</h2>
</header>

<div id="nextBoss">Next Boss: Loading...</div>
<div class="boss-container" id="bossContainer"></div>

<script>
// ---- Data ----
const bosses = [
  { name:'Undomiel',   respawn:24*60*60 },
  { name:'Lady Daliah',respawn:18*60*60 },
  { name:'Venatus',    respawn:10*60*60 }, // 10 hrs
  { name:'Viorent',    respawn:10*60*60 },
  { name:'Ego',        respawn:21*60*60 },
  { name:'Thymele',    special:'clematis' },
  { name:'Araneo',     respawn:24*60*60 },
  { name:'Livera',     respawn:24*60*60 },
  { name:'Clemantis',  special:'clematis' },
  { name:'Saphirus',   special:'saphirus' },
  { name:'Neutro',     special:'neutro' },
  { name:'General Aquleus', respawn:29*60*60 },
  { name:'Amentis',    respawn:29*60*60 },
  { name:'Baron Braudmore', respawn:32*60*60 },
  { name:'Milavy',     special:'milavy' },
  { name:'Wannitas',   respawn:48*60*60 },
  { name:'Metus',      respawn:48*60*60 },
  { name:'Duplican',   respawn:48*60*60 },
  { name:'Shuliar',    respawn:35*60*60 },
  { name:'Ringor',     special:'ringor' },
  { name:'Roderick',   special:'roderick' },
  { name:'Gareth',     respawn:32*60*60 },
  { name:'Titore',     respawn:37*60*60 },
  { name:'Larba',      respawn:35*60*60 },
  { name:'Catena',     respawn:35*60*60 },
  { name:'Auraq',      special:'auraq' }
];

function nameToId(n){
  return ('b-' + n.toLowerCase().trim()
    .replace(/\s+/g,'-')
    .replace(/[^a-z0-9-]/g,''));
}

function parseSpecialSpawn(type, fromDate = new Date()){
  const d = new Date(fromDate);
  let next;
  switch(type){
    case 'clematis': {
      const days = [1,4]; // Mon & Thu
      const times = [[11,30],[19,0]];
      next = findNextFixed(d, days, times);
      break;
    }
    case 'saphirus': {
      const days = [0,2]; // Sun & Tue
      const times = [[17,0],[11,30]];
      next = findNextFixed(d, days, times);
      break;
    }
    case 'neutro': {
      const days = [2,4]; // Tue & Thu
      const times = [[19,0],[11,30]];
      next = findNextFixed(d, days, times);
      break;
    }
    case 'milavy': {
      next = findNextSingle(d, 6, 15, 0); // Sat 15:00
      break;
    }
    case 'ringor': {
      next = findNextSingle(d, 6, 17, 0); // Sat 17:00
      break;
    }
    case 'roderick': {
      next = findNextSingle(d, 5, 19, 0); // Fri 19:00
      break;
    }
    case 'auraq': {
      const days = [0,3]; // Sun & Wed
      const times = [[21,0],[21,0]];
      next = findNextFixed(d, days, times);
      break;
    }
  }
  return next;
}

function findNextFixed(current, days, times){
  let soonest = null;
  for(let i=0;i<days.length;i++){
    const day = days[i];
    const [h,m] = times[i];
    const candidate = new Date(current);
    candidate.setHours(h,m,0,0);
    const diffDays = (day - candidate.getDay() + 7) % 7;
    candidate.setDate(candidate.getDate() + diffDays + (diffDays===0 && candidate<=current ? 7 : 0));
    if(soonest===null || candidate<soonest) soonest = candidate;
  }
  return soonest;
}

function findNextSingle(current, day, h, m){
  const candidate = new Date(current);
  candidate.setHours(h,m,0,0);
  let diffDays = (day - candidate.getDay() + 7) % 7;
  if(diffDays===0 && candidate<=current) diffDays=7;
  candidate.setDate(candidate.getDate()+diffDays);
  return candidate;
}

function formatTime(ms){
  if(ms<=0) return 'SPAWNED!';
  const s=Math.floor(ms/1000);
  const h=Math.floor(s/3600);
  const m=Math.floor((s%3600)/60);
  const sec=s%60;
  return `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
}

function createUI(){
  const container = document.getElementById('bossContainer');
  bosses.forEach(b => {
    if(b.special) b.nextSpawn = parseSpecialSpawn(b.special);
    else b.nextSpawn = new Date(Date.now() + b.respawn*1000);

    const id = nameToId(b.name);
    const div = document.createElement('div');
    div.className = 'boss';
    div.id = id;
    div.innerHTML = `
      <h3>${b.name}</h3>
      <div class="timer" id="timer-${id}"></div>
      <div class="next" id="next-${id}"></div>
      <div class="reminder">Set a kill time or use "Killed Now"</div>
      <div class="manual-entry">
        <input type="time" id="killTime-${id}" step="60">
      </div>
      <div class="controls">
        <button onclick="killedNow('${id}')">Killed Now</button>
        <button onclick="manualEntry('${id}')">Set Manual Kill Time</button>
      </div>
    `;
    container.appendChild(div);
  });
}

function updateTimers(){
  const now = new Date();
  bosses.forEach(b => {
    if(!(b.nextSpawn instanceof Date)) b.nextSpawn = new Date(b.nextSpawn);
    let diff = b.nextSpawn - now;
    const id = nameToId(b.name);
    const timerEl = document.getElementById(`timer-${id}`);
    const nextEl = document.getElementById(`next-${id}`);

    if(timerEl && nextEl){
      timerEl.textContent = formatTime(diff);
      timerEl.className = 'timer';

      if(diff<=0){
        timerEl.classList.add('spawned');
      } else if(diff<=30*60*1000){
        timerEl.classList.add('red');
      } else if(diff<=2*60*60*1000){
        timerEl.classList.add('yellow');
      } else {
        timerEl.classList.add('green');
      }
      nextEl.textContent = `Next: ${b.nextSpawn.toLocaleString()}`;
    }
  });

  // Sort bosses by nearest spawn
  bosses.sort((a,b) => a.nextSpawn - b.nextSpawn);
  const container = document.getElementById('bossContainer');
  bosses.forEach(b => container.appendChild(document.getElementById(nameToId(b.name))));

  // Update next boss
  const nextBoss = bosses[0];
  document.getElementById('nextBoss').textContent = `Next Boss: ${nextBoss.name} at ${nextBoss.nextSpawn.toLocaleString()}`;
}

function killedNow(id){
  const b = bosses.find(b => nameToId(b.name)===id);
  const now = new Date();
  if(b.special) b.nextSpawn = parseSpecialSpawn(b.special, now);
  else b.nextSpawn = new Date(now.getTime() + b.respawn*1000);
}

function manualEntry(id){
  const b = bosses.find(b => nameToId(b.name)===id);
  const input = document.getElementById(`killTime-${id}`);
  if(!input.value) return;
  const now = new Date();
  const [h,m] = input.value.split(':').map(Number);
  let killTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, m);
  if(killTime > now) killTime.setDate(killTime.getDate()-1);
  if(b.special) b.nextSpawn = parseSpecialSpawn(b.special, killTime);
  else b.nextSpawn = new Date(killTime.getTime() + b.respawn*1000);
}

createUI();
updateTimers();
setInterval(updateTimers, 1000);
</script>

</body>
</html>
